<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="assets/imgs/logo naruto.png" type="image/x-icon">
    <link rel=" stylesheet" href="css/sidebar.css">
    <link rel=" stylesheet" href="css/quiz.css">
    <link rel="stylesheet" href="../css/scrollbar.css">
    <!-- Sweet alert -->
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="//cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@4/dark.css" rel="stylesheet">
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
    <script src="../app.js"></script>
    <!-- Sweet alert -->
</head>

<body>
    <div class="banner-quiz">
        <div id="container">
            <nav class="select-disable" id="nav">
                <img src="assets/imgs/logo naruto.png" href="index.html" class="logo-naruto">
                <div class="texto-user">
                    <span>Bem-vindo</span>
                    <span id="b_usuario"></span>
                </div>
                <ul class="nav-list">
                    <li><a href="dashboard/dashboard-média-quiz.html"><img class="icone-nav"
                                src="assets/imgs/sharingan.png" alt="icone sharigan"><span>Média quiz</span></a></li>

                    <li><a href="dashboard/dashabord-personagens-favoritos.html"><img class="icone-nav"
                                src="assets/imgs/sasuke-uchiha.png" alt="icone sharigan"><span>Personagem </span></a>
                    </li>
                    <li><a href="personalidade.html"><img class="icone-nav"
                                src="assets/imgs/icone-anime.png"" alt=" icone anime">
                            <span>Personalidade</span></a>
                    </li>
                    <li><a href="pontuacao.html"><img class="icone-nav" src="assets/imgs/naruto-sign.png"
                                alt="icone bandana"><span>Pontuações</span></a>
                    </li>
                    <li class="pag-atual"><a href="quiz.html"><img class="icone-nav" src="assets/imgs/logo naruto.png"
                                alt="icone hinata"><span>Quiz</span></a>
                    </li>
                </ul>
                <a href="../login.html"><button>SAIR</button></a>
            </nav>
            <div class="quiz">
                <div class="list-naruto">
                    <span class="titulo">Quiz Naruto Clássico.</span>
                    <div class="card">
                        <div class="questoes" id="questao1">
                            <h1>1- Quem venceu a batalha final no vale do fim ?</h1>
                            <div class="resp">
                                <div class="opcao">
                                    <input type="radio" nome="opcao1" value="Naruto Uzumaki">
                                    <span class="text">a) Naruto Uzumaki</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" nome="opcao1" value="Sasuke Uchiha">
                                    <span class="text">b)  Sasuke Uchiha</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" nome="opcao1" value="Itachi Uchiha">
                                    <span class="text">c) Itachi Uchiha </span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" nome="opcao1" value="Gaara">
                                    <span class="text">d) Gaara </span>
                                </div>
                            </div>
                        </div>
                        <div class="questoes" id="questao2" style="display: none;">
                            <h1>2- Quem derrotou Haku no arco do pais das ondas?</h1>
                            <div class="resp">
                                <div class="opcao">
                                    <input type="radio" name="opcao2" value="Naruto Uzumaki">
                                    <span class="text">a) Naruto Uzumaki</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao2" value="Sasuke Uchiha">
                                    <span class="text">b) Sasuke Uchiha</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao2" value="Sakura Haruno">
                                    <span class="text">c) Sakura Haruno</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao2" value="Kakahi Hatake">
                                    <span class="text">d) Kakahi Hatake</span>
                                </div>
                            </div>
                        </div>
                        <div class="questoes" id="questao3" style="display: none;">
                            <h1>3-Qual é o nome do espírito dentro do naruto?</h1>
                            <div class="resp">
                                <div class="opcao">
                                    <input type="radio" name="opcao3" value="Raposa de nove caudas">
                                    <span class="text">a) Raposa de nove caudas</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao3" value="Shukaku">
                                    <span class="text"> b) Shukaku</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao3" value="matatabi">
                                    <span class="text">c) Matatabi</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao3" value="Isobu">
                                    <span class="text">d) Isobu </span>
                                </div>
                            </div>
                        </div>
                        <div class="questoes" id="questao4" style="display: none;">
                            <h1>4- Quantos episódios tem Naruto clássico?</h1>
                            <div class="resp">
                                <div class="opcao">
                                    <input type="radio" name="opcao4" value="220 episódios">
                                    <span class="text">a) 220 episódios</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao4" value="230 episódios">
                                    <span class="text">b) 230 episódios</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao4" value="250 episódios">
                                    <span class="text">c) 250 episódios</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao4" value="229 episódios">
                                    <span class="text">d) 229 episódios</span>
                                </div>
                            </div>
                        </div>
                        <div class="questoes" id="questao5" style="display: none;">
                            <h1>5-Que jutsu impediu o Orochimaru de usar jutsu ?</h1>
                            <div class="resp">
                                <div class="opcao">
                                    <input type="radio" name="opcao5" value="Selo ceifeiro da morte">
                                    <span class="text">a) Selo Ceifeiro da morte</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao5" value="Selo ceifero da vida">
                                    <span class="text">b) Selo ceifero da vida</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao5" value="Selo Ceifeiro do inferno">
                                    <span class="text">c) Selo Ceifeiro do inferno</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao5" value="Selo Ceifeiro da vontade">
                                    <span class="text">d) Selo Ceifeiro da vontade</span>
                                </div>
                            </div>
                        </div>
                        <div class="questoes" id="questao6" style="display: none;">
                            <h1>6- Qual foi o 1 jutsu que naruto aprendeu no anime?</h1>
                            <div class="resp">
                                <div class="opcao">
                                    <input type="radio" name="opcao6" value="Jutsu clone das sombras">
                                    <span class="text">a) Jutsu Clone das Sombras</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao6" value="Jutsu multiclone das Sombras">
                                    <span class="text">b) Jutsu Multiclone das Sombras</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao6" value="Rasengan">
                                    <span class="text">c) Rasengan</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao6" value="Odaama Rasengan">
                                    <span class="text">d) Odaama Rasengan</span>
                                </div>
                            </div>
                        </div>
                        <div class="questoes" id="questao7" style="display: none;">
                            <h1>7- Nome do pai do sasuke?</h1>
                            <div class="resp">
                                <div class="opcao">
                                    <input type="radio" name="opcao7" value="Fugaku Uchiha">
                                    <span class="text">a) Fugaku Uchiha</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao7" value="Sakumo Uchiha">
                                    <span class="text">b) Sakumo Uchiha</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao7" value="Hatake Uchiha">
                                    <span class="text">c) Hatake Uchiha</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao7" value="Fugaku Namikaze">
                                    <span class="text">d) Fugaku Namikaze</span>
                                </div>
                            </div>
                        </div>
                        <div class="questoes" id="questao8" style="display: none;">
                            <h1>8- Nome do pai do Naruto?</h1>
                            <div class="resp">
                                <div class="opcao">
                                    <input type="radio" name="opcao8" value="Fugaku Uchiha">
                                    <span class="text">a) Fugaku Uchiha</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao8" value="Sakumo Uchiha">
                                    <span class="text">b) Sakumo Uchiha</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao8" value="Hatake Uchiha">
                                    <span class="text">c) Hatake Uchiha</span>
                                </div>
                                <div class="opcao">
                                    <input type="radio" name="opcao8" value="Minato Namikaze">
                                    <span class="text">d) Minato Namikaze</span>
                                </div>
                            </div>
                        </div>
                        <div style="display: flex;">
                            <button class="botao" id="anterior" onclick="AntQuestao()">Questão Anterior</button>
                            <button class="botao" id="proxima" onclick="ProxQuestao()">Próxima Questão</button>
                            <button class="botao" id="finalizar" onclick="FinalizarQuiz()">Finalizar Quiz</button>
                        </div>
                    </div>
                </div>
            </div>
</body>

</html>

<script>
    document.getElementById('anterior').style.display = 'none';
    document.getElementById('finalizar').style.display = 'none';
    b_usuario.innerHTML = sessionStorage.NOME_USUARIO;

    var Usuario = 0;
    var anterior = 0;
    var proxima = 0;
    var pontos = 0;
    var percentual = 0;
    var img = './assets/imgs/gif-apaixonado.gif';
    var msg = '';
    var radios = [];
    var respostascorretas = ["Sasuke Uchiha", "Naruto Uzumaki", "Raposa de nove caudas", "220 episódios", "Selo ceifeiro da morte", "Jutsu multiclone das Sombras", "Fugaku Uchiha", "Minato Namikaze"];
    var idUsuario = sessionStorage.ID_USUARIO;
    console.log(sessionStorage.ID_USUARIO)


    Swal.fire({
        imageUrl: 'assets/imgs/gif-sobre.gif',
        imageWidth: 1000,
        title: 'Bem-vindo ao Quiz de Naruto Clássico, boa sorte😄...!',
        html: 'Feito por: Will Dantas - 1ADS A',
        confirmButtonText: 'DATTEBAYO!',
        background: '#000',
        color: '#FFF',
    })

    function AntQuestao() {
        anterior--;
        proxima = anterior

        if (anterior == 6) {
            questao8.style.display = "none";
            questao7.style.display = "flex";
            document.getElementById('anterior').style.display = 'block';
            document.getElementById('finalizar').style.display = 'none';
        } else if (anterior == 5) {
            questao7.style.display = "none";
            questao6.style.display = "flex";
        } else if (anterior == 4) {
            questao6.style.display = "none";
            questao5.style.display = "flex";
        } else if (anterior == 3) {
            questao5.style.display = "none";
            questao4.style.display = "flex";
        } else if (anterior == 2) {
            questao4.style.display = "none";
            questao3.style.display = "flex";
        } else if (anterior == 1) {
            questao3.style.display = "none";
            questao2.style.display = "flex";
        } else if (anterior == 0) {
            questao2.style.display = "none";
            questao1.style.display = "flex";
            document.getElementById('anterior').style.display = 'none';
        }
    }

    function ProxQuestao() {
        proxima++;
        anterior = proxima
        if (proxima == 1) {
            questao1.style.display = "none";
            questao2.style.display = "flex";
            document.getElementById('anterior').style.display = 'block';
        } else if (proxima == 2) {
            questao2.style.display = "none";
            questao3.style.display = "flex";
        } else if (proxima == 3) {
            questao3.style.display = "none";
            questao4.style.display = "flex";
        } else if (proxima == 4) {
            questao4.style.display = "none";
            questao5.style.display = "flex";
        } else if (proxima == 5) {
            questao5.style.display = "none";
            questao6.style.display = "flex";
        } else if (proxima == 6) {
            questao6.style.display = "none";
            questao7.style.display = "flex";
        } else if (proxima == 7) {
            questao7.style.display = "none";
            questao8.style.display = "flex";
            document.getElementById('proxima').style.display = 'none';
            document.getElementById('finalizar').style.display = 'block';
        }
    }

    function FinalizarQuiz() {
        radios = document.querySelectorAll("input[type='radio']:checked");
        if (radios.length < respostascorretas.length) {
            Swal.fire({
                imageUrl: 'assets/imgs/gif-naruto.gif',
                imageWidth: 3000,
                background: '#000',
                 color: '#FFF',
                 confirmButtonText: 'triste!',
                title: 'Responda todas questões 😠...!',

            });
        } else {
            Usuario = 0;
            for (var index = 0; index < radios.length; index++) {
                if (respostascorretas.indexOf(radios[index].value) >= 0) {
                    Usuario++;
                }
            }
            pontos = Usuario * 10;
            percentual = Usuario / respostascorretas.length * 100;

            if (Usuario == 0 || Usuario <= 4) {
                imageUrl: 'assets/imgs/gif-triste.gif',
                    msg = ` <span class="text"> 
                            Poderia ter sido melhor <b>${idUsuario}</b> 😔😔, sua pontuação foi de
                            <b>${pontos}</b> pontos, que equivale à <b>${percentual.toFixed(2)}%</b> do Quiz
                        </span>`;
            } else {
                imageUrl: 'assets/imgs/gif-apaixonado.gif',
                    msg = ` <span class="text">
                            PARÁBENS  <b>${idUsuario}</b> 🥳🥳, você é FÃ NÚMERO 1 DE NARUTO e sua pontuação foi de
                            <b>${pontos}</b> pontos, que equivale à<b> ${percentual.toFixed(2)}%</b> do Quiz
                        </span>`;
            }
            fetch("/usuarios/cadastrarPontuacao", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    // crie um atributo que recebe o valor recuperado aqui
                    // Agora vá para o arquivo routes/usuario.j
                    idUsuarioServer: idUsuario,
                    pontosServer: pontos,
                    percentualServer: percentual.toFixed(2)
                })
            }).then(function (resposta) {

                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    Swal.fire({

                        imageUrl: 'assets/imgs/gif-quiz.gif',
                        imageWidth: 3000,
                        title: 'Quiz finalizado',
                        background: '#000',
                        confirmButtonText: 'DATTEBAYO!',
                        color: '#FFF',
                        html: msg,
                    }).then((result) => {
                        setTimeout(function () {
                            window.location = "pontuacao.html";
                        }, 1000);
                    })
                } else {
                    throw ("Houve um erro ao tentar realizar o cadastro!");
                }
            }).catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });

            return false;
        }
    }
</script>